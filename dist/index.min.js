!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.noreact=e():t.noreact=e()}(window,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s="./src/index.ts")}({"./src/MVVM.ts":function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r("./src/diff.ts"),i=r("./src/event-center.ts"),s=r("./src/VNode.ts"),a=r("./src/react.ts"),c=r("./src/refresh.ts"),u=n(r("./src/dev.ts")),h=function(){function t(t){this.$eventRegister={},this.$children=[],this.$isdirty=!1,this.$hasRenderedDom=!1,this.$mountDom=null,this.$isDestroyed=!1,"[object Object]"==toString.call(t)?this.$props=t:this.$props={},this.$id=a.GetId()}return t.prototype.$onInit=function(){},t.prototype.$onRendered=function(){},t.prototype.$onDestroyed=function(){},t.prototype.$emitUp=function(t,e){this.$root.EmitUp(t,e,this)},t.prototype.$emitDown=function(t,e){this.$root.EmitDown(t,e,this)},t.prototype.$on=function(t,e){this.$eventRegister[t]||(this.$eventRegister[t]=[]),this.$eventRegister[t].push(e),i.RegisterEvent(t,e)},t.prototype.$broadcast=function(t,e){i.TriggerEvent(t,this,e)},t.prototype.$Trigger=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=this.$eventRegister[t];n&&n.forEach(function(t){return t.apply(void 0,e)})},t.prototype.$ToDom=function(){return this.$hasRenderedDom=!0,this.$root||this.$DoRender(),this.$root.ToDom()},t.prototype.$ToHtml=function(){return this.$Render().ToHtml()},t.prototype.$GetRoot=function(){return this.$root||this.$DoRender(),this.$root},t.prototype.$SetChildren=function(t){this.$children=t},t.prototype.$GetChildren=function(){return this.$children},t.prototype.$Dirty=function(){this.$isdirty||(this.$isdirty=!0,c.InsertQueue(this))},t.prototype.$GetDirty=function(){return this.$isdirty},t.prototype.$ApplyRefresh=function(){var e;if(this.$isdirty){u.default.OnChange("update",[this]),a.React.ChangeMode("shallow");var r=a.React.target;a.React.target=this;var n=this.$Render();if(a.React.target=r,a.React.ChangeMode("deep"),t.$compareVNode(this.$root,n))this.$useOld(this.$root,n);else{if(this.$hasRenderedDom){var o=n.ToDom(),i=this.$root.GetParent().GetSiblingDom(this.$root);i.isparent?(e=i.dom).append.apply(e,o):o.forEach(function(t){i.dom.parentNode.insertBefore(t,i.dom)}),this.$root.Doms.forEach(function(t){t.remove()})}this.$root.GetParent().isMulti=n.isMulti,n.SetParent(this.$root.GetParent());var s=this.$root.GetAllMvvm();s.length>0&&u.default.OnChange("delete",s),this.$root=n,this.$hasRenderedDom&&n.Rendered();var c=n.GetAllMvvm();c.length>0&&u.default.OnChange("new",c,{isparent:!0,id:this.$id})}this.$isdirty=!1}},t.prototype.$DoRender=function(){this.$onInit();var t=[];Object.keys(this).forEach(function(e){e.startsWith("$")||t.push(e)}),t.length>0&&this.$watchObject(this,t);var e=a.React.target;return a.React.target=this,this.$root=this.$Render(),this.$attachedVNode||(this.$attachedVNode=new s.VNode("custom"),this.$attachedVNode.SetMvvm(this)),this.$attachedVNode.isMulti=this.$root.isMulti,this.$root.SetParent(this.$attachedVNode),a.React.target=e,this.$root},t.prototype.$watchObject=function(t,e){var r=this;if("[object Object]"!=toString.call(t)&&"[object Array]"!=toString.call(t));else{var n=[];(e&&e.length>0&&e||Object.keys(t)).forEach(function(e){var o=Object.getOwnPropertyDescriptor(t,e);if(o&&o.configurable){var i=t[e];Object.defineProperty(t,e,{get:function(){return a.React.target&&n.indexOf(a.React.target)&&n.push(a.React.target),i},set:function(t){t!=i&&(n.forEach(function(t){return t.$Dirty()}),i=t,"[object Array]"==toString.call(i)&&r.$watchArray(i,n),r.$watchObject(i))},configurable:!1,enumerable:!0}),"[object Array]"==toString.call(i)&&r.$watchArray(i,n),r.$watchObject(i)}})}},t.prototype.$watchArray=function(t,e){this.$overwriteArrayMethods(t,"pop",e),this.$overwriteArrayMethods(t,"push",e),this.$overwriteArrayMethods(t,"splice",e),this.$overwriteArrayMethods(t,"unshift",e),this.$overwriteArrayMethods(t,"shift",e)},t.prototype.$overwriteArrayMethods=function(t,e,r){var n=t[e];if("function"==typeof n){var o=Object.getOwnPropertyDescriptor(t,e);o&&!o.configurable||Object.defineProperty(t,e,{value:function(){return r.forEach(function(t){return t.$Dirty()}),n.apply(this,arguments)},configurable:!1})}},t.prototype.$useOld=function(t,e){if("custom"!=t.GetType()){if("standard"==t.GetType()||"fragment"==t.GetType())return"standard"==t.GetType()&&t.ApplyAttrDiff(e.GetAttrs()),void this.$diff(t.GetChildren(),e.GetChildren(),t);t.GetType()}else{var r=t.GetInstance(),n=e.GetInstance();r.$isdirty?(r.$props=n.$props,r.$SetChildren(n.$children),r.$ApplyRefresh()):this.$compareProps(r.$props,n.$props)&&this.$compareChildren(r.$children,n.$children)||(r.$props=n.$props,r.$SetChildren(n.$children),r.$isdirty=!0,r.$ApplyRefresh())}},t.prototype.$IsParentOf=function(t){for(var e=t.$attachedVNode.GetParent();e;){if(e.GetInstance()==this)return!0;e=e.GetParent()}return!1},t.prototype.$compareProps=function(t,e){if("[object Object]"==toString.call(t)&&"[object Object]"==toString.call(e)){var r=Object.keys(t),n=Object.keys(e),o={};r.forEach(function(t){o[t]=1}),n.forEach(function(t){o[t]?o[t]++:o[t]=1});var i=!1;if(Object.keys(o).forEach(function(t){2!=o[t]&&(i=!0)}),i)return!1;for(var s=0;s<r.length;s++){var a=r[s];if(!this.$compareProp(t[a],e[a]))return!1}return!0}return!1},t.prototype.$compareChildren=function(t,e){return t instanceof Array&&e instanceof Array&&0==t.length&&0==e.length||t===e},t.prototype.$compareProp=function(t,e){return"function"==typeof t&&"function"==typeof e&&void 0!==t.prototype&&void 0!==e.prototype?"function"==typeof t.toString&&"function"==typeof e.toString&&t.toString()==e.toString():t===e},t.prototype.$diff=function(e,r,n){var i=this,s=o.Diff(e,r,t.$compareVNode),a=0;s.forEach(function(t){return"old"==t.state?(a++,void i.$useOld(t.oldValue,t.newValue)):"new"==t.state?(t.newValueOrigin?(i.$useOld(t.newValueOrigin,t.newValue),n.InsertVNode(t.newValueOrigin,a,i.$hasRenderedDom)):(i.$hasRenderedDom&&t.newValue.ToDom(),n.InsertVNode(t.newValue,a,i.$hasRenderedDom),i.$devNew(t.newValue,a),i.$hasRenderedDom&&t.newValue.Rendered()),void a++):"delete"==t.state?(n.RemoveVNode(t.oldValue,a,i.$hasRenderedDom&&t.isdeprecated),i.$devDelete(t.oldValue),void(t.isdeprecated&&t.oldValue.Destroy())):void("replace"==t.state&&(n.RemoveVNode(t.oldValue,a,i.$hasRenderedDom&&t.isdeprecated),i.$devDelete(t.oldValue),t.isdeprecated&&t.oldValue.Destroy(),t.newValueOrigin?(i.$useOld(t.newValueOrigin,t.newValue),n.InsertVNode(t.newValueOrigin,a,i.$hasRenderedDom)):(i.$hasRenderedDom&&t.newValue.ToDom(),n.InsertVNode(t.newValue,a,i.$hasRenderedDom),i.$devNew(t.newValue,a),i.$hasRenderedDom&&t.newValue.Rendered()),a++))})},t.prototype.$devDelete=function(t){var e=t.GetAllMvvm();e.length>0&&u.default.OnChange("delete",e)},t.prototype.$devNew=function(t,e){var r=t.GetAllMvvm();if(r.length>0){var n=null,o=t.GetParent();if(o.GetChildren().length-1>e)(n=o.GetChildren()[e+1].GetFirstChildMvvm())&&u.default.OnChange("new",r,{isparent:!1,id:n.$id});n||u.default.OnChange("new",r,{isparent:!0,id:o.GetNearestAncestorMvvm().$id})}},t.prototype.$Rendered=function(){this.$root.Rendered(),this.$onRendered()},t.prototype.$Destroy=function(){this.$isDestroyed=!0,this.$onDestroyed(),this.$root.Destroy()},t.prototype.$IsDestroyed=function(){return this.$isDestroyed},t.prototype.$AttachVNode=function(t){this.$attachedVNode=t},t.prototype.$AppendTo=function(t){var e;(e="string"==typeof t?document.querySelector(t):t).append.apply(e,this.$ToDom()),this.$mountDom=e,this.$Rendered(),u.default.AddMvvm(this)},t.prototype.$GetMountDom=function(){return this.$mountDom},t.prototype.$GetAttachedVNode=function(){return this.$attachedVNode},t.$compareVNode=function(t,e){return t.GetAttr("key")==e.GetAttr("key")&&(t.GetType()==e.GetType()&&(("custom"!=t.GetType()||t.GetInstance().constructor==e.GetInstance().constructor)&&(("standard"!=t.GetType()||t.GetTag()==e.GetTag())&&("text"!=t.GetType()||t.GetText()==e.GetText()))))},t.prototype.GetProps=function(){return this.$props},t}();e.MVVM=h},"./src/VNode.ts":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("./src/attribute.ts"),o=r("./src/react.ts"),i=function(){function t(t){this.tag="",this.text="",this.children=[],this.attrs={},this.parent=null,this.isDestroyed=!1,this.isMulti=!1,this.type=t}return Object.defineProperty(t.prototype,"Doms",{get:function(){if("standard"==this.type||"text"==this.type)return[this.dom];if("fragment"==this.type){var t=[];return this.children.forEach(function(e){t=t.concat(e.Doms)}),t}return"custom"==this.type?this.mvvm.$GetRoot().Doms:void 0},enumerable:!0,configurable:!0}),t.prototype.SetTag=function(t){this.tag=t},t.prototype.GetTag=function(){return this.tag},t.prototype.GetText=function(){return this.text},t.prototype.SetText=function(t){this.text=t},t.prototype.SetMvvm=function(t){this.mvvm=t},t.prototype.GetInstance=function(){return this.mvvm},t.prototype.GetParent=function(){return this.parent},t.prototype.InsertVNode=function(t,e,r){var n;if(this.children.splice(e,0,t),t.parent=this,r){var o=this.GetSiblingDom(t),i=t.Doms;o.isparent?(n=o.dom).append.apply(n,i):i.forEach(function(t){o.dom.parentNode.insertBefore(t,o.dom)})}},t.prototype.GetSiblingDom=function(t){if("custom"==this.type)return this.parent?this.parent.GetSiblingDom(this):{dom:this.mvvm.$GetMountDom(),isparent:!0};var e=this.children.indexOf(t);for(e++;e<this.children.length;){var r=this.children[e].Doms;if(r.length>0)return{dom:r[0],isparent:!1};e++}return this.isMulti?this.parent.GetSiblingDom(this):{dom:this.dom,isparent:!0}},t.prototype.RemoveVNode=function(t,e,r){if(void 0===r&&(r=!0),this.children.splice(e,1),r){var n=t.Doms;n&&n.forEach(function(t){t.parentNode.removeChild(t)})}},t.prototype.SetChildren=function(t){var e=this;t.forEach(function(t){t.parent=e}),this.children=t},t.prototype.IsDestroyed=function(){return this.isDestroyed},t.prototype.Destroy=function(){this.isDestroyed=!0,"custom"==this.type&&this.mvvm.$Destroy(),this.children.forEach(function(t){t.Destroy()})},t.prototype.GetChildren=function(){return this.children},t.prototype.Rendered=function(){"custom"==this.type&&this.mvvm.$Rendered(),"standard"!=this.type&&"fragment"!=this.type||this.children.forEach(function(t){t.Rendered()}),this.attrs.ref instanceof o.Ref&&("standard"==this.type?this.attrs.ref.current=this.dom:"custom"==this.type&&(this.attrs.ref.current=this.mvvm))},t.prototype.GetType=function(){return this.type},t.prototype.SetAttr=function(t,e){this.attrs[t]=e},t.prototype.GetAttr=function(t){return this.attrs[t]},t.prototype.GetAttrs=function(){return this.attrs},t.prototype.SetParent=function(t){this.parent=t},t.prototype.ApplyAttrDiff=function(t){var e=this;Object.keys(this.attrs).forEach(function(r){var o=n.GetEventAttrName(r),i=null!=o;if(null==t[r])i?e.dom.removeEventListener(o,e.attrs[r]):n.RemoveAttr(e.dom,r,e.attrs[r]);else{if("style"==r&&"[object Object]"==toString.call(e.attrs.style)&&"[object Object]"==toString.call(t.style)){var s=e.attrs.style,a=t.style;for(var c in s)a[c]?a[c]!=s[c]&&(e.dom.style[c]=a[c]):e.dom.style[c]="";for(var u in a)s[u]||(e.dom.style[u]=a[u]);return}i?e.attrs[r]!=t[r]&&(e.dom.removeEventListener(o,e.attrs[r]),e.dom.addEventListener(o,t[r])):e.attrs[r]!=t[r]&&(n.RemoveAttr(e.dom,r,e.attrs[r]),n.ApplyAttr(e.dom,r,t[r]))}}),Object.keys(t).forEach(function(r){var o=n.GetEventAttrName(r),i=null!=o;null==e.attrs[r]&&(i?e.dom.addEventListener(o,t[r]):n.ApplyAttr(e.dom,r,t[r]))}),this.attrs=t},t.prototype.ToHtml=function(){var t=this;if("text"==this.type)return this.text;if("custom"==this.type)return this.mvvm.$ToHtml();if("standard"==this.type){var e=[];return e.push("<"+this.tag),Object.keys(this.attrs).forEach(function(r){var o=n.SerializeAttr(r,t.attrs[r]);o&&e.push(" "+o)}),e.push(">"),this.children.forEach(function(t){var r=t.ToHtml();e.push(r)}),e.push("</"+this.tag+">"),e.join("")}if("fragment"==this.type){var r=[];return this.children.forEach(function(t){var e=t.ToHtml();r.push(e)}),r.join("")}},t.prototype.ToDom=function(){var t=this;if("custom"==this.type)return this.mvvm.$ToDom();if("standard"==this.type){var e=document.createElement(this.tag);return this.dom=e,Object.keys(this.attrs).forEach(function(r){var o=n.GetEventAttrName(r);o?e.addEventListener(o,t.attrs[r]):n.ApplyAttr(e,r,t.attrs[r])}),this.children.forEach(function(t){t.ToDom().forEach(function(t){return e.appendChild(t)})}),[e]}if("fragment"==this.type){var r=[];return this.children.forEach(function(t){var e=t.ToDom();r=r.concat(e)}),r}if("text"==this.type){var o=document.createTextNode(this.text);return this.dom=o,[o]}},t.prototype.EmitUp=function(t){for(var e,r,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];this.parent&&("custom"==this.parent.type&&(e=this.parent.mvvm).$Trigger.apply(e,[t].concat(n)),(r=this.parent).EmitUp.apply(r,[t].concat(n)))},t.prototype.EmitDown=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.children.forEach(function(r){var n;"custom"==r.type&&(n=r.mvvm).$Trigger.apply(n,[t].concat(e)),r.EmitDown.apply(r,[t].concat(e))})},t.prototype.AttachDom=function(t){var e=this;this.dom=t,Object.keys(this.attrs).forEach(function(r){var o=n.GetEventAttrName(r);o&&t.addEventListener(o,e.attrs[r])})},t.prototype.GetNearestAncestorMvvm=function(){return"custom"==this.type?this.mvvm:this.parent&&this.parent.GetNearestAncestorMvvm()},t.prototype.GetFirstChildMvvm=function(){if("custom"==this.type)return this.mvvm;for(var t=0;t<this.children.length;t++){var e=this.children[t].GetFirstChildMvvm();if(e)return e}return null},t.prototype.GetAllMvvm=function(){if("custom"==this.type)return[this.mvvm];if("text"==this.type)return[];if("standard"==this.type||"fragment"==this.type){var t=[];return this.children.forEach(function(e){t=t.concat(e.GetAllMvvm())}),t}return[]},t}();e.VNode=i},"./src/attribute.ts":function(t,e,r){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.VNODE_ID="__decorator__";var o=!1;e.ServerRender=function(t){o=t};var i={style:function(t,e){if("[object Object]"==toString.call(e)){for(var r in e)t.style[r]=e[r];return!0}return!1},className:function(t,e){return t.setAttribute("class",e),!0},key:function(t,e){return!0},ref:function(t,e){return!0},value:function(t,e){return t instanceof HTMLInputElement&&(t.value=e,!0)}},s={style:function(t,e){if("[object Object]"==toString.call(e)){for(var r in e)t.style[r]="";return!0}return!1},className:function(t,e){return t.setAttribute("class",""),!0},key:function(t,e){return!0},value:function(t,e){return t instanceof HTMLInputElement&&(t.value="",!0)}},a=((n={style:function(t){if("[object Object]"==toString.call(t)){var e="";for(var r in t)e+=r+"="+t[r]+";";return'style="'+e+'"'}return"style="+t},className:function(t){return"class="+t},key:function(t){return""},ref:function(t){return""}})[e.VNODE_ID]=function(t){return o?e.VNODE_ID+"="+t:""},n);e.SerializeAttr=function(t,e){return"[object Function]"==toString.call(e)?"":a[t]?a[t](e):t+"="+e},e.ApplyAttr=function(t,e,r){if(i[e]&&i[e](t,r))return;t.setAttribute(e,r)},e.RemoveAttr=function(t,e,r){if(s[e]&&s[e](t,r))return;t.setAttribute(e,"")},e.GetEventAttrName=function(t){return/^on([A-Z][a-z]+)+$/.test(t)?t.slice(2).toLowerCase():null}},"./src/dev.ts":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=new(function(){function t(){this.roots=[],this.listeners=[]}return t.prototype.Subscribe=function(t,e){-1==this.listeners.indexOf(t)&&(this.roots&&e(this.toJson()),this.listeners.push(t))},t.prototype.AddMvvm=function(t){var e=this;this.roots.push(t),this.listeners.forEach(function(r){r("new",e.getMvvm(t.$GetAttachedVNode()))})},t.prototype.Unsubscribe=function(t){this.listeners=this.listeners.filter(function(e){return e!=t})},t.prototype.toJson=function(){var t=this,e=[];return this.roots&&this.roots.forEach(function(r){e=e.concat(t.getMvvm(r.$GetAttachedVNode()))}),e},t.prototype.getMvvm=function(t){var e=this;if("standard"==t.GetType()||"text"==t.GetType()){var r=[];return t.GetChildren().forEach(function(t){r=r.concat(e.getMvvm(t))}),r}if("fragment"==t.GetType()){var n={name:"fragment",data:null,props:null,children:[]};return t.GetChildren().forEach(function(t){var r=e.getMvvm(t);r&&(n.children=n.children.concat(r))}),[n]}if("custom"==t.GetType()){var o=t.GetInstance().constructor.name,i={};return Object.keys(t.GetInstance()).forEach(function(e){e.startsWith("$")&&"$id"!=e||(i[e]=t.GetInstance()[e])}),[{name:o,data:i,props:t.GetInstance().GetProps(),children:this.getMvvm(t.GetInstance().$GetRoot())}]}throw new Error("vnode type error")},t.prototype.OnChange=function(t,e,r){var n=this,o=[];e.forEach(function(e){var r={name:e.constructor.name,props:e.GetProps(),data:{},children:[]};Object.keys(e).forEach(function(t){t.startsWith("$")&&"$id"!=t||(r.data[t]=e[t])}),"new"==t&&(r.children=n.getMvvm(e.$GetRoot())),o.push(r)}),this.listeners.forEach(function(e){e(t,o,r)})},t}());window.__noreact_dev=n,e.default=n},"./src/diff.ts":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Diff=function(t,e,r){var n={},o={},i=function(t,e){for(var r=[],n=0;n<=t.length;n++){for(var o=[],i=0;i<=e.length;i++)0!=n?0!=i?o.push({value:-1,fromRow:-1,fromColumn:-1}):o.push({value:n,fromRow:n-1,fromColumn:0}):o.push({value:i,fromRow:0,fromColumn:i-1});r.push(o)}return r}(t,e);!function t(e,r,n,o,i,s){var a=e[r.length][n.length];if(-1!=a.value)return a.value;var c=0,u=o(r[r.length-1],n[n.length-1]);u?(c=0,i[r.length-1]=n.length-1,s[n.length-1]=r.length-1):c=1;var h=t(e,r.slice(0,r.length-1),n,o,i,s)+1,f=t(e,r,n.slice(0,n.length-1),o,i,s)+1,l=t(e,r.slice(0,r.length-1),n.slice(0,n.length-1),o,i,s)+c,p=Math.min(h,f,l);return a.value=p,p==h?(a.fromRow=r.length-1,a.fromColumn=n.length):p==f?(a.fromRow=r.length,a.fromColumn=n.length-1):(a.fromRow=r.length-1,a.fromColumn=n.length-1),a.value}(i,t,e,r,n,o);var s=function(t,e,r,n,o){for(var i=r.length,s=e.length,a=[];0!=s||0!=i;){var c=t[s][i];c.fromColumn!=i-1||c.fromRow!=s-1?c.fromColumn!=i||c.fromRow!=s-1?c.fromColumn!=i-1||c.fromRow!=s||(a.push({newValue:r[i-1],state:"new",newValueOrigin:e[o[i-1]]}),i--):(a.push({oldValue:e[s-1],state:"delete",isdeprecated:null==n[s-1]}),s--):(c.value!=t[s-1][i-1].value?a.push({oldValue:e[s-1],isdeprecated:null==n[s-1],state:"replace",newValue:r[i-1],newValueOrigin:e[o[i-1]]}):a.push({oldValue:e[s-1],state:"old",newValue:r[i-1]}),s--,i--)}return a}(i,t,e,n,o);return s.reverse(),s}},"./src/event-center.ts":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={};e.RegisterEvent=function(t,e){n[t]||(n[t]=[]),n[t].push(e)},e.TriggerEvent=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];n[t]&&n[t].forEach(function(t){t.apply(void 0,e)})}},"./src/index.ts":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("./src/MVVM.ts");e.MVVM=n.MVVM;var o=r("./src/react.ts");e.React=o.React,e.Ref=o.Ref,e.Fragment=o.Fragment;var i=r("./src/VNode.ts");e.VNode=i.VNode;var s=r("./src/dev.ts");e.Dev=s.default},"./src/react.ts":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("./src/VNode.ts"),o=r("./src/MVVM.ts"),i=(new Function("try {return this===window;}catch(e){ return false;}"),function(){function t(){this.mode="deep"}return t.prototype.createElement=function(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var a=[];if(this.flatten("",r,a),"string"==typeof t){if((u=new n.VNode("standard")).SetTag(t),u.isMulti=!1,null!=e)for(var c in e)u.SetAttr(c,e[c]);return u.SetChildren(a),u}if(t==s){if((u=new n.VNode("fragment")).isMulti=!0,u.SetChildren(a),null!=e)for(var c in e)u.SetAttr(c,e[c]);return u}if(t.prototype instanceof o.MVVM){var u=new n.VNode("custom"),h=new t(e);if(u.SetMvvm(h),h.$SetChildren(a),h.$AttachVNode(u),"deep"==this.mode){var f=h.$DoRender();u.isMulti=f.isMulti}if(null!=e)for(var c in e)u.SetAttr(c,e[c]);return u}},t.prototype.flatten=function(t,e,r){var o=this;e.forEach(function(e,i){if(null!=e)if(e instanceof Array)o.flatten(t+i+"_",e,r);else if(e instanceof n.VNode){null!=e.GetAttr("key")?r.push(e):(e.SetAttr("key",t+i),r.push(e))}else{var s=new n.VNode("text");s.SetText(e+""),s.SetAttr("key",t+i),r.push(s)}})},t.prototype.ChangeMode=function(t){this.mode=t},t}()),s=function(){return function(){}}();e.Fragment=s;var a=function(){return function(){}}();e.Ref=a,e.React=new i;var c=0;e.GetId=function(){return c++}},"./src/refresh.ts":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=[],i=[],s=10,a=0;e.InsertQueue=function(t){-1==o.indexOf(t)&&(o.push(t),!n&&o.length>0&&(n=new Promise(function(t,e){t()}).then(function(){i=o,o=[],a=0,function(){for(;;){if(i.sort(function(t,e){return t.$IsParentOf(e)?-1:e.$IsParentOf(t)?1:0}),a>s)throw new Error("refresh loop more than "+s);if(a++,i.forEach(function(t){!t.$IsDestroyed()&&t.$GetDirty()&&t.$ApplyRefresh()}),0==o.length)break;i=o,o=[]}}(),n=null})))}}})});
//# sourceMappingURL=index.min.js.map